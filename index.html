<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="automagically convert between JSON and C++">
        
        
        <link rel="shortcut icon" href="./img/favicon.ico">

        <title>autojsoncxx</title>

        <link href="./css/bootstrap-3.0.3.min.css" rel="stylesheet">
        <link href="./css/font-awesome-4.0.3.css" rel="stylesheet">
        <link href="./css/prettify-1.0.css" rel="stylesheet">
        <link href="./css/base.css" rel="stylesheet">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>

            <!-- Main title -->
            <a class="navbar-brand" href=".">autojsoncxx</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            <!-- Main navigation -->
            <ul class="nav navbar-nav">
            
            
                <li >
                    <a href="tutorial/">Tutorial</a>
                </li>
            
            
            
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">User guide <b class="caret"></b></a>
                    <ul class="dropdown-menu">
                    
                        <li >
                            <a href="user_guide/definition_file_syntax/">Definition file syntax</a>
                        </li>
                    
                        <li >
                            <a href="user_guide/error_handling/">Error handling</a>
                        </li>
                    
                        <li >
                            <a href="user_guide/miscellaneous/">Miscellaneous</a>
                        </li>
                    
                        <li >
                            <a href="user_guide/type_support/">Type support</a>
                        </li>
                    
                    </ul>
                </li>
            
            
            </ul>

            <!-- Search, Navigation and Repo links -->
            <ul class="nav navbar-nav navbar-right">
                
                <li class="disabled">
                    <a rel="next" >
                        <i class="fa fa-arrow-left"></i> Previous
                    </a>
                </li>
                <li >
                    <a rel="prev" href="tutorial/">
                        Next <i class="fa fa-arrow-right"></i>
                    </a>
                </li>
                
                <li>
                    <a href="https://github.com/netheril96/autojsoncxx">
                        
                            <i class="fa fa-github"></i>
                        
                        GitHub
                    </a>
                </li>
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#autojsoncxx">autojsoncxx</a></li>
        
            <li><a href="#overview">Overview</a></li>
        
            <li><a href="#features">Features</a></li>
        
            <li><a href="#testing">Testing</a></li>
        
            <li><a href="#quick-start">Quick start</a></li>
        
            <li><a href="#documentation">Documentation</a></li>
        
    
    </ul>
</div></div>
            <div class="col-md-9" role="main">

<h1 id="autojsoncxx">autojsoncxx</h1>
<p>A header-only library and a code generator to <strong>automagically</strong> translate between <strong>JSON</strong> and <strong>C++</strong> types.</p>
<h2 id="overview">Overview</h2>
<p>JSON is a popular format for data exchange. Reading and writing JSON in C++, however, is nontrivial. Even with the help of libraries, one still needs to write lots of boilerplate code, and it is extremely hard to guard against all possible errors, since JSON is dynamically typed while C++ employs static typing.</p>
<p>More importantly, manually writing such code is a violation of <strong>DRY</strong> principle. When manually written, the class definition, parsing and serialization code can easily become out of sync, leading to brittle code and subtle bugs.</p>
<p><em>autojsoncxx</em> is an attempt to solve this problem by automating such process.</p>
<h3 id="dependency">Dependency</h3>
<ul>
<li><a href="https://github.com/miloyip/rapidjson">RapidJSON</a> </li>
<li><a href="https://www.python.org">Python</a> (2.7 or 3.3+)</li>
<li>(optional) <a href="https://github.com/erikrose/parsimonious">Parsimonious</a></li>
<li>(optional) <a href="https://github.com/philsquared/Catch">Catch</a></li>
<li>(optional) <a href="http://www.boost.org">Boost</a></li>
</ul>
<h2 id="features">Features</h2>
<ul>
<li>The parsing/serializing code are <strong>automagically</strong> generated.</li>
<li><strong>Detailed error message</strong>. Unlike ordinary JSON libraries, <em>autojsoncxx</em> will detect not only invalid JSON errors, but also mismatch between JSON value and C++ type specification.</li>
<li><strong>Ease of use</strong>. A single function call is enough for most use cases. The library has no complicated build setup, since it's header only.</li>
<li><strong>Fast</strong>. Based on the streaming API of <code>rapidjson</code> and C++ templates, this library is efficient both in space and time.</li>
<li><strong>Flexible framework</strong>. Whenever the support of a certain class <code>Foo</code> is added to the library, all the combination of types, like <code>std::vector&lt;Foo&gt;</code>, <code>std::shared_ptr&lt;Foo&gt;</code>, <code>std::deque&lt;std::map&lt;std::string, Foo&gt;&gt;&gt;</code> is automatically supported as well, thanks to the use of template specialization.</li>
<li><strong>Liberal license</strong>. Both the library and its dependency are licensed liberally (MIT or BSD-like). Anyone is free to copy, distribute, modify or include in their own projects, be it open source or commercial.</li>
</ul>
<h2 id="testing">Testing</h2>
<p><a href="https://travis-ci.org/netheril96/autojsoncxx"><img alt="Build Status" src="https://travis-ci.org/netheril96/autojsoncxx.svg?branch=master" /></a></p>
<p>To build the test, you need a sufficiently new compiler because the goal is to test all the type support, including many ones only introduced in c++11.</p>
<p>First clone the repository, and pull the dependency</p>
<pre class="prettyprint well"><code class="bash">git clone https://github.com/netheril96/autojsoncxx.git
git submodule init
git submodule update
</code></pre>

<p><em>UNIX/Linux/Mac users</em>:</p>
<pre class="prettyprint well"><code class="bash">make
make test
</code></pre>

<p><em>Windows users</em>: </p>
<p>Generate the <code>test/userdef.hpp</code> file from the definition <code>examples/userdef.json</code>. Then open the solution file under <code>test/mscvXX_test/</code> to build and run the test.</p>
<p>If too many tests fail, make sure your work directory points to the <code>test</code> directory.</p>
<h3 id="currently-tested-compilers">Currently tested compilers</h3>
<ul>
<li>Clang 3.4/3.5 on Mac OS X (11.9)</li>
<li>GCC 4.9 (Homebrew) on Mac OS X (11.9)</li>
<li>Clang 3.0 on Ubuntu 12.04 (x64)</li>
<li>GCC 4.8 on Ubuntu 14.04.1 (x86/x64)</li>
<li>MSVC 10 (x86) on Windows 7</li>
<li>MSVC 11/12 (x86/x64) on Windows 7</li>
</ul>
<h2 id="quick-start">Quick start</h2>
<p>The code generator reads a JSON file that defines the class structure. An example definition is like this</p>
<pre class="prettyprint well"><code class="javascript">{
    &quot;name&quot;: &quot;Person&quot;,
    &quot;members&quot;:
    [
        [&quot;unsigned long long&quot;, &quot;ID&quot;, {&quot;required&quot;: true}],
        [&quot;std::string&quot;, &quot;name&quot;, {&quot;default&quot;: &quot;anonymous&quot;}],
        [&quot;double&quot;, &quot;height&quot;],
        [&quot;double&quot;, &quot;weight&quot;],
        [&quot;std::vector&lt;unsigned long long&gt;&quot;, &quot;known_associates&quot;]
    ]
}
</code></pre>

<p>Run the script <em>autojsoncxx.py</em> (requires Python 2.7+, including version 3+) on this definition file, and a header file will be generated. It includes a definition for <code>Person</code> as well as some helper classes. </p>
<pre class="prettyprint well"><code class="bash">python autojsoncxx.py --input=persondef.json --output=person.hpp
</code></pre>

<h3 id="serialization">Serialization</h3>
<pre class="prettyprint well"><code class="c++">Person p;
autojsoncxx::to_pretty_json_file(&quot;person.json&quot;, p);
autojsoncxx::to_json_file(stdout, p);
autojsoncxx::to_json_string(std::make_shared&lt;Person&gt;(p));
</code></pre>

<h3 id="parsing">Parsing</h3>
<pre class="prettyprint well"><code class="c++">autojsoncxx::ParsingResult result;
Person p;
if (!autojsoncxx::from_json_file(&quot;person.json&quot;, p, result)) {
    std::cerr &lt;&lt; result &lt;&lt; '\n';
    return -1;
}
</code></pre>

<h3 id="error-handling">Error handling</h3>
<p>If the JSON file is malformed, any decent JSON library will detect it and tell you what goes wrong. But what if the JSON value is perfectly valid, but not laid out the way you expected? Usually you have to manually check the DOM tree against your specification, but this library will automatically generates the necessary code.</p>
<p>Here is valid JSON file</p>
<pre class="prettyprint well"><code class="javascript">{
    &quot;name&quot;: &quot;Mike&quot;,
    &quot;ID&quot;: 8940220481904,
    &quot;height&quot;: 1.77,
    &quot;weight&quot;: 70.0,
    &quot;known_associates&quot;: [
        &quot;Jack&quot;, &quot;Mary&quot;
    ]
}
</code></pre>

<p>Running through the parsing code, and you will get an error output:</p>
<pre class="prettyprint well"><code>Parsing failed at offset 127 with error code 16:
Terminate parsing due to Handler error.

Trace back (last call first):
(*) Type mismatch between expected type &quot;uint64_t&quot; and actual type &quot;string&quot;
(*) Error at array element with index 0
(*) Error at object member with name &quot;known_associates&quot;
</code></pre>

<h2 id="documentation">Documentation</h2>
<p>Read more <a href="https://netheril96.github.io/autojsoncxx/tutorial">here</a>.</p>
</div>
        </div>

        

        <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
        <script src="./js/bootstrap-3.0.3.min.js"></script>
        <script src="./js/prettify-1.0.min.js"></script>
        <script src="./js/base.js"></script>
    </body>
</html>